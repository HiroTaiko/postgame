# PosiGame

スマートフォン上で現在の位置情報を表示するための Expo (React Native) アプリです。

## 必要環境

- Node.js 18 以上
- npm または yarn / pnpm
- Expo CLI (`npx expo` で自動的に利用できます)
- iOS / Android 実機またはエミュレータ

## セットアップ

```sh
npm install
```

## 開発サーバーの起動

```sh
npx expo start
```

- 表示された QR コードを Expo Go アプリで読み込むことで実機で動作確認できます。
- iOS シミュレータを使う場合は `i`、Android エミュレータを使う場合は `a` をターミナルで入力してください。

## 機能概要

- アプリ起動時に位置情報へのアクセス許可をリクエストします。
- 許可されると、高精度で現在地を取得し、緯度・経度・高度・精度・最終更新時刻を表示します。
- 権限が拒否された場合は、再リクエスト用ボタンと共にメッセージを表示します。
- Android では精度向上のために高精度位置設定を促すメッセージを表示します。
- HP（上限100）と、初期値5の護力・響力をプログレス表示で確認できます。
- 複数の危険源が設定されており、各地点で距離に応じた二次関数的なダメージ計算と最大値を `App.js` 内の `DANGER_ZONES` から調整できます。
- ダメージは護力（防御力）で軽減され、UI では総被ダメージと地点ごとの素ダメージ／軽減後ダメージを確認できます。
- 仮想円内を移動しつつ円周で鏡面反射する危険源を 1 つ追加しており、こちらはダメージ上限なしで設定できます。

## 注意事項

- iOS では `app.json` の `infoPlist.NSLocationWhenInUseUsageDescription` を必要に応じて編集してください。
- Android ではエミュレータの位置情報が適切に設定されていることを確認してください。
- 端末の省電力設定によって位置情報の更新が遅くなる場合があります。

## ビルド

本番ビルドやストア配信を行う場合は、Expo Application Services (EAS) の利用を検討してください。依存パッケージのバージョンは `package.json` を参照してください。
